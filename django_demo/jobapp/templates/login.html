{% extends 'layout.html' %}


{% block style %}
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>Home</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content=""/>
    <meta name="keywords" content=""/>
    <meta name="author" content=""/>
    <!-- Facebook and Twitter integration -->
    <meta property="og:title" content=""/>
    <meta property="og:image" content=""/>
    <meta property="og:url" content=""/>
    <meta property="og:site_name" content=""/>
    <meta property="og:description" content=""/>
    <meta name="twitter:title" content=""/>
    <meta name="twitter:image" content=""/>
    <meta name="twitter:url" content=""/>
    <meta name="twitter:card" content=""/>

    <link href="https://fonts.googleapis.com/css?family=Roboto:300,400,700" rel="stylesheet">

    <!-- Animate.css -->
    <link rel="stylesheet" href="../static/css/animate.css">
    <!-- Icomoon Icon Fonts-->
    <link rel="stylesheet" href="../static/css/icomoon.css">
    <!-- Themify Icons-->
    <link rel="stylesheet" href="../static/css/themify-icons.css">
    <!-- Bootstrap  -->
    <link rel="stylesheet" href="../static/css/bootstrap.css">

    <!-- Magnific Popup -->
    <link rel="stylesheet" href="../static/css/magnific-popup.css">

    <!-- Owl Carousel  -->
    <link rel="stylesheet" href="../static/css/owl.carousel.min.css">
    <link rel="stylesheet" href="../static/css/owl.theme.default.min.css">

    <!-- Theme style  -->
    <link rel="stylesheet" href="../static/css/style.css">

    <!-- Modernizr JS -->
    <script src="../static/js/modernizr-2.6.2.min.js"></script>
    <!-- FOR IE9 below -->
    <!--[if lt IE 9]>
	<script src="../static/js/respond.min.js"></script>
	<![endif]-->
    <style>
        #gtco-header .form-wrap .tab-menu li {
            width: 100%;
        }

        #gtco-header .form-wrap .tab-content .tab-content-inner {
            display: block;
        }

        #gtco-header .form-wrap .tab-menu li.active a {
            background: rgba(255, 255, 255, 0.5);
        }

        #code {
            width: 100%;
        }
        #top{
            margin-bottom: 0;
        }
    </style>
{% endblock %}


{% block content %}

    <div class="gtco-loader"></div>

    <div id="page">


        <div class="page-inner">
            <nav class="gtco-nav" role="navigation">
                <div class="gtco-container">

                    <div class="row">
                        <div class="col-sm-4 col-xs-12">
                            <div id="gtco-logo"><a href="/login/">WangKS<em>.</em></a></div>
                        </div>
                        <div class="col-xs-8 text-right menu-1">
                            <ul>
                                <li class="btn-cta"><a href="/regist/"><span>注  册</span></a></li>
                            </ul>
                        </div>
                    </div>

                </div>
            </nav>

            <header id="gtco-header" class="gtco-cover" role="banner"
                    style="background-image: url(../static/images/img_4.jpg)">
                <div class="overlay"></div>
                <div class="gtco-container">
                    <div class="row">
                        <div class="col-md-12 col-md-offset-0 text-left">


                            <div class="row row-mt-15em">
                                <div class="col-md-7 mt-text animate-box" data-animate-effect="fadeInUp">
                                    <span class="intro-text-small" style="font-size: 30px">感谢你的到来，欢迎测试！</span>
                                    <h1 style="font-size: 50px">Never give up, Never lose the opportunity to succeed.</h1>
                                </div>
                                <div class="col-md-4 col-md-push-1 animate-box" data-animate-effect="fadeInRight">
                                    <div class="form-wrap">
                                        <div class="tab">
                                            <ul class="tab-menu">
                                                <li class="gtco-second"><a data-tab="login" style="color: black">登 陆</a>
                                                </li>
                                            </ul>
                                            <div class="tab-content">


                                                <div class="tab-content-inner" data-content="login">
                                                    <form id="login-form">
                                                        <div class="row form-group">
                                                            <div class="col-md-12">
                                                                <label for="username">用 户 名</label>
                                                                <input type="text" class="form-control" id="username"
                                                                       name="username" required="true" placeholder="请输入用户名"
                                                                       value="{{ u_name }}">
                                                            </div>
                                                        </div>
                                                        <div class="row form-group">
                                                            <div class="col-md-12">
                                                                <label for="password">密 码</label>
                                                                <input type="password" class="form-control" id="password" name="password" required="true" placeholder="请输入密码">
                                                            </div>
                                                        </div>
                                                        <div class="row form-group">
                                                            <div class="col-md-12">
                                                                <div style="display: block">
                                                                    <label for="password">验 证 码</label>
                                                                </div>

                                                                    <div style="display: inline-block; width: 166.6px; height: 71.2px; float: left">
                                                                        <input type="text" class="form-control" id="code" name="code" required="true" placeholder="请输入验证码">
                                                                        <span style="color: red; font-size: small" id="err_msg"></span>
                                                                    </div>
                                                                    <div style="width: 100px; height: 40px; float: right">
                                                                        <img id="image_code" style=" width: 100px" src="/image_code/">
                                                                        <span style="font-size: small; cursor: pointer" id="flush_code">看不清..点我刷新</span>
                                                                    </div>
                                                                </div>

                                                        </div>
                                                    </form>
                                                    <div class="row form-group">
                                                        <div class="col-md-12">
                                                            <input id="login" type="submit" class="btn btn-primary" value="登 陆">
                                                        </div>
                                                    </div>

                                                </div>

                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>


                        </div>
                    </div>
                </div>
            </header>
        </div>

    </div>
{% endblock %}


{% block js %}
    <!-- jQuery -->
    <script src="../static/js/jquery.min.js"></script>
    <!-- jQuery Easing -->
    <script src="../static/js/jquery.easing.1.3.js"></script>
    <!-- Bootstrap -->
    <script src="../static/js/bootstrap.min.js"></script>
    <!-- Waypoints -->
    <script src="../static/js/jquery.waypoints.min.js"></script>
    <!-- Carousel -->
    <script src="../static/js/owl.carousel.min.js"></script>
    <!-- countTo -->
    <script src="../static/js/jquery.countTo.js"></script>
    <!-- Magnific Popup -->
    <script src="../static/js/jquery.magnific-popup.min.js"></script>
    <script src="../static/js/magnific-popup-options.js"></script>
    <!-- Main -->
    <script src="../static/js/main.js"></script>

    <script type="text/javascript">
        $(function () {
            binBtn1Event();
            binBtn2Event()
        });

        function binBtn1Event() {
            $("#login").click(function () {
                $("#err_msg").text('');
                $.ajax({

                    url: '/login/',
                    type: 'post',
                    data: $("#login-form").serialize(),
                    dataType: "JSON",
                    success: function (res) {

                        if (res.status === "1") {
                            $("#err_msg").text(res.err_str);
                            $("#image_code").attr("src", "/image_code?flag=" + Math.random());
                        } else {
                            window.location.href = '/home/'
                        }
                    }
                })
            })

        }

        function binBtn2Event() {
            $("#flush_code").click(function () {
                $.ajax({
                    success: function () {
                        $("#image_code").attr("src", "/image_code?flag=" + Math.random());
                    }
                })
            })

        }

    </script>

{% endblock %}


